<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Fussy by jbilcke</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Fussy</h1>
        <p class="header">JSON prediction and recommendation engine</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/jbilcke/node-fussy/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/jbilcke/node-fussy/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/jbilcke/node-fussy">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/jbilcke">jbilcke</a></p>


      </header>
      <section>
        <h1>
<a name="node-fussy" class="anchor" href="#node-fussy"><span class="octicon octicon-link"></span></a>node-fussy</h1>

<p><em>JSON prediction and recommendation engine</em></p>

<p><a href="http://travis-ci.org/jbilcke/node-fussy"><img src="https://secure.travis-ci.org/jbilcke/node-fussy.png" alt="Build Status"></a>
<a href="https://gemnasium.com/jbilcke/node-fussy"><img src="https://gemnasium.com/jbilcke/node-fussy.png" alt="Dependency Status"></a></p>

<h2>
<a name="summary" class="anchor" href="#summary"><span class="octicon octicon-link"></span></a>Summary</h2>

<p>Fussy is an inference engine for Node. You can use it to guess missing values in a JSON object.</p>

<p>It tried to find the most probable values for missing attributes by scanning a database of previously seen objects, computing a weighted average based on similarity.</p>

<h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>Demo examples (included in the project):</p>

<ul>
<li><a href="https://github.com/jbilcke/node-fussy/tree/master/examples/logic">Logic: playing with boolean and fuzzy truth tables</a></li>
<li><a href="https://github.com/jbilcke/node-fussy/tree/master/examples/mushrooms">Mushrooms: recommendation of mushrooms</a></li>
</ul><p>More examples:</p>

<ul>
<li><a href="https://github.com/jbilcke/node-fussy-examples/tree/master/sonar">Sonar: categorization of sonar data into mines or rocks</a></li>
<li><a href="https://github.com/jbilcke/node-fussy-examples/tree/master/wilt">Wilt: detecting diseased trees in Quickbird imagery</a></li>
<li><a href="https://github.com/jbilcke/node-fussy-examples/tree/master/emotiv">Emotiv: detecting eye state from Emotiv EEG Headset</a></li>
<li><a href="https://github.com/jbilcke/node-fussy-examples/tree/master/letters">Letters: letter recognition (OCR)</a></li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>BSD (see LICENCE.txt file).</p>

<h2>
<a name="current-issues" class="anchor" href="#current-issues"><span class="octicon octicon-link"></span></a>Current issues</h2>

<p>Fussy is an experimental project, and has a number of pitfalls:</p>

<ul>
<li>no tests yet (but soon)</li>
<li>code is alpha quality, not reviewed</li>
<li>all data must be loaded into memory (cannot use a remote db yet)</li>
<li>extremely slow (see mushroom demo..)</li>
<li>the "0" value is not supported well</li>
<li>not tested for strings (distance function is a bit broken, and will be rewritten)</li>
<li>and probably many other bugs..</li>
</ul><h2>
<a name="how-it-works" class="anchor" href="#how-it-works"><span class="octicon octicon-link"></span></a>How it works</h2>

<h3>
<a name="algorithm" class="anchor" href="#algorithm"><span class="octicon octicon-link"></span></a>Algorithm</h3>

<p>The algorithm works as the following:</p>

<p>For a given JSON object with some missing fields, it tries to determine the most probable value of these fields, by looking at all the past values, and computing the average.</p>

<p>However, it does a weighted average: a different "trust" is given to each past object, depending on how close and relevant they are from the object to repair.</p>

<p>For this, what Fussy do is iteraring over all the stored objects (in a map-reduce fashion), and computing a distance score, based on the similarity between values: strings, numbers..</p>

<p>This distance will be used to weight the value of the missing field when computing the average.</p>

<h2>
<a name="quick-start" class="anchor" href="#quick-start"><span class="octicon octicon-link"></span></a>Quick-start</h2>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<h4>
<a name="as-a-dependency" class="anchor" href="#as-a-dependency"><span class="octicon octicon-link"></span></a>As a dependency</h4>

<p>Go to your Node (and NPM-managed) project, and run:</p>

<pre><code>$ npm install fussy --save
</code></pre>

<h4>
<a name="from-sources" class="anchor" href="#from-sources"><span class="octicon octicon-link"></span></a>From sources</h4>

<p>To download the sources, build the coffee-script and link into your system:</p>

<pre><code>$ git clone git@github.com:jbilcke/node-fussy.git
$ cd node-fussy
$ npm run build
$ npm link
</code></pre>

<h3>
<a name="initialization" class="anchor" href="#initialization"><span class="octicon octicon-link"></span></a>Initialization</h3>

<p>First you have to get an instance of the class Fussy</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">Fussy</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fussy'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fussy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Fussy</span><span class="p">();</span>
</pre></div>

<h3>
<a name="inserting-json-data" class="anchor" href="#inserting-json-data"><span class="octicon octicon-link"></span></a>Inserting JSON data</h3>

<p>Then you can insert documents. You have a few ways of doing this.</p>

<p>You can use use the <code>insert</code> method, which takes a JSON object, or an array of
objects:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">fussy</span>
  <span class="p">.</span><span class="nx">insert</span><span class="p">({</span> <span class="s1">'food'</span><span class="o">:</span> <span class="s1">'rice'</span><span class="p">,</span>  <span class="s1">'taste'</span><span class="o">:</span> <span class="s1">'good'</span><span class="p">});</span>
  <span class="p">.</span><span class="nx">insert</span><span class="p">([</span>
    <span class="p">{</span> <span class="s1">'food'</span><span class="o">:</span> <span class="s1">'salad'</span><span class="p">,</span> <span class="s1">'taste'</span><span class="o">:</span> <span class="s1">'good'</span><span class="p">},</span>
    <span class="p">{</span> <span class="s1">'food'</span><span class="o">:</span> <span class="s1">'grass'</span><span class="p">,</span> <span class="s1">'taste'</span><span class="o">:</span> <span class="s1">'bad'</span> <span class="p">}</span>
  <span class="p">]);</span>

</pre></div>

<h3>
<a name="importing-a-dataset" class="anchor" href="#importing-a-dataset"><span class="octicon octicon-link"></span></a>Importing a dataset</h3>

<p>After spending some time using Fussy on various datasets, I found it handy
to write a small importer for CSV files. So here we go!</p>

<p>The <code>import</code> function takes an input CSV file, and a list of columns as parameter:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">fussy</span><span class="p">.</span><span class="kr">import</span><span class="p">(</span><span class="s1">'thermal.csv'</span><span class="p">,</span> <span class="p">[</span> <span class="s1">'day'</span><span class="p">,</span> <span class="s1">'temperature'</span> <span class="p">]);</span>
</pre></div>

<p>This second parameter can be used to define types:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">fussy</span><span class="p">.</span><span class="kr">import</span><span class="p">(</span><span class="s1">'thermal.csv'</span><span class="p">,</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">'day'</span><span class="p">,</span><span class="s1">'String'</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">'temperature'</span><span class="p">,</span><span class="s1">'Number'</span><span class="p">]</span>
<span class="p">]);</span>
</pre></div>

<p>You can also define a dictionary of values, when using Strings:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">fussy</span><span class="p">.</span><span class="kr">import</span><span class="p">(</span><span class="s1">'thermal.csv'</span><span class="p">,</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">'day'</span><span class="p">,</span> <span class="p">{</span>
      <span class="s1">'mon'</span><span class="o">:</span> <span class="s1">'Monday'</span><span class="p">,</span>
      <span class="s1">'tue'</span><span class="o">:</span> <span class="s1">'Tuesday'</span><span class="p">,</span>
      <span class="s1">'wed'</span><span class="o">:</span> <span class="s1">'Wednesday'</span><span class="p">,</span>
      <span class="s1">'thu'</span><span class="o">:</span> <span class="s1">'Thursday'</span><span class="p">,</span>
      <span class="s1">'fri'</span><span class="o">:</span> <span class="s1">'Friday'</span><span class="p">,</span>
      <span class="s1">'sat'</span><span class="o">:</span> <span class="s1">'Saturday'</span><span class="p">,</span>
      <span class="s1">'sun'</span><span class="o">:</span> <span class="s1">'Sunday'</span>
      <span class="p">}],</span>
    <span class="p">[</span><span class="s1">'temperature'</span><span class="p">,</span><span class="s1">'Number'</span><span class="p">]</span>
<span class="p">]);</span>
</pre></div>

<h3>
<a name="using-the-dataset-function" class="anchor" href="#using-the-dataset-function"><span class="octicon octicon-link"></span></a>Using the dataset function</h3>

<p>Sometimes you need to do some operations on a dataset before using it.</p>

<p>For instance, maybe you only want to keep a subset of the dataset, or do
random sampling, so you need access to the array before importing it.</p>

<p>Fussy provides a function to create a dataset (array of JSONs), available
in the <code>fussy.toolbox</code> object.</p>

<p>The <code>fussy.toolbox.dataset</code> takes an input CSV file and a list of columns as
parameter.</p>

<p>It works like the import function:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">toolbox</span><span class="p">.</span><span class="nx">dataset</span><span class="p">(</span><span class="s1">'thermal.csv'</span><span class="p">,</span> <span class="p">[</span> <span class="s1">'day'</span><span class="p">,</span> <span class="s1">'temperature'</span> <span class="p">]);</span>
</pre></div>

<p>You can then manipulate this array, before importing it. For instance:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">toolbox</span><span class="p">.</span><span class="nx">shuffle</span><span class="p">(</span>
  <span class="nx">fussy</span><span class="p">.</span><span class="nx">toolbox</span><span class="p">.</span><span class="nx">dataset</span><span class="p">(</span><span class="s1">'data.csv'</span><span class="p">,</span> <span class="s1">'schema.json'</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>

<p>Will load the dataset and shuffle it.</p>

<h3>
<a name="predicting-data" class="anchor" href="#predicting-data"><span class="octicon octicon-link"></span></a>Predicting data</h3>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">query</span><span class="p">({</span>
  <span class="nx">select</span><span class="o">:</span> <span class="p">[</span><span class="s1">'column'</span><span class="p">],</span>
  <span class="nx">where</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="o">:</span> <span class="s1">''</span><span class="p">,</span>
    <span class="nx">bar</span><span class="o">:</span> <span class="s1">''</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="using-the-results" class="anchor" href="#using-the-results"><span class="octicon octicon-link"></span></a>Using the results</h3>

<p>When you call the query object, what you get is a result set, or "view" on
the data. This view has the following methods:</p>

<h4>
<a name="best" class="anchor" href="#best"><span class="octicon octicon-link"></span></a>best()</h4>

<p>The <code>best</code> function returns the best value for a given field. It actually
just takes the first element of the <code>all</code> function.</p>

<p>Depending on the distribution and the category of problem you are trying to
solve, this might not be the best choice for you.</p>

<h4>
<a name="mix" class="anchor" href="#mix"><span class="octicon octicon-link"></span></a>mix()</h4>

<p>The <code>mix</code> compute the weighted average value for a numeric field.</p>

<p>For instance, say there are 3 possible values for a "temperature" field: 10, 20, 40..</p>

<p>While the <code>all</code> function will returns an array of value-&gt;weight, the <code>mix</code>
function will directly returns you the weighted average, eg. 23.33.</p>

<h4>
<a name="all" class="anchor" href="#all"><span class="octicon octicon-link"></span></a>all()</h4>

<p>The <code>all</code> function returns the distribution of values: an array sorted by weight,
of all possible choices for the requested fields.</p>

<p>This is actually an array of <code>(value, weight)</code> tuples.</p>

<p>Use this function if you want access to raw data, and need to make
multiple, weighted decisions. (eg. for investment, risk management use cases).</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
