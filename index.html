<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Fussy by jbilcke</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Fussy</h1>
        <h2>Javascript recommendation engine</h2>
        <a href="https://github.com/jbilcke/node-fussy" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="node-fussy" class="anchor" href="#node-fussy"><span class="octicon octicon-link"></span></a>node-fussy</h1>

<p><em>javascript recommendation engine</em></p>

<p>NOTE: I'm not an English native, so feel free to open issues if you see typos and bad grammar</p>

<h2>
<a name="summary" class="anchor" href="#summary"><span class="octicon octicon-link"></span></a>Summary</h2>

<p>node-fussy is a recommendation engine, powered by user actions.
It learns from user actions by adjusting some weights in a hidden network, one for each user.
This hidden network is built from the concepts extracted from the content evaluated by the user.
Recommendations are thus unique to each user. It can work even with 1 user and a few events in its database.</p>

<p><a href="https://nodei.co/npm/fussy/"><img src="https://nodei.co/npm/fussy.png?downloads=true&amp;stars=true" alt="NPM"></a></p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>You can see the examples/ dir, or:</p>

<h3>
<a name="basic-demo" class="anchor" href="#basic-demo"><span class="octicon octicon-link"></span></a>Basic demo</h3>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">fussy</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fussy'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">samples</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a video advertisement about an upcoming movie featuring pirates"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span>  <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a youtube ad about hackers"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span>  <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a facebook ad selling cloud hosting"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">NEGATIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a video advertisement featuring video games"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_1'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">NEGATIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a facebook ad about video games"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span>  <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a video advertisement about an upcoming movie featuring cowboys"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span>  <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">NEGATIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a movie trailer about bearded magicians"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">NEGATIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a facebook ad selling cloud hosting"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a trailer for movie featuring cowboy sharks against aliens"</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="s1">'test_user_2'</span><span class="p">,</span> <span class="nx">signal</span><span class="o">:</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">POSITIVE</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s2">"a facebook ad about a new farm game"</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="c1">// var engine = new fussy.Engine("./database.json");</span>
<span class="c1">// OR</span>
<span class="kd">var</span> <span class="nx">engine</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">fussy</span><span class="p">.</span><span class="nx">Engine</span><span class="p">({</span>
  <span class="nx">stringSize</span><span class="o">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span>
  <span class="nx">ngramSize</span><span class="o">:</span> <span class="mi">3</span>
<span class="p">});</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">samples</span><span class="p">.</span><span class="nx">length</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">engine</span><span class="p">.</span><span class="nx">pushEvent</span><span class="p">(</span><span class="nx">samples</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>

<span class="c1">// remove noise, by filtering weakest connections between concepts</span>
<span class="nx">engine</span><span class="p">.</span><span class="nx">prune</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>


<span class="nx">engine</span><span class="p">.</span><span class="nx">rateProfiles</span><span class="p">(</span><span class="s1">'an ad showing a video game about pirates'</span><span class="p">,</span> <span class="p">{</span> 
  <span class="nx">profiles</span><span class="o">:</span> <span class="p">[</span><span class="s1">'test_user_1'</span><span class="p">,</span> 
             <span class="s1">'test_user_2'</span><span class="p">]</span> 
<span class="p">});</span>

<span class="nx">engine</span><span class="p">.</span><span class="nx">rateProfiles</span><span class="p">(</span>
 <span class="s1">'an ad showing a video game about pirates'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">limit</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span>
<span class="p">);</span>
<span class="c1">// [ ["test_user_2",14], ["test_user_1",-9] ]</span>

<span class="nx">engine</span><span class="p">.</span><span class="nx">rateContents</span><span class="p">(</span><span class="s1">'test_user_1'</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'an ad about magicians'</span><span class="p">,</span>
  <span class="s1">'an ad about tablet games'</span>
<span class="p">]);</span>
<span class="c1">// [ ["an ad about magicians",0], ["an ad about tablet games",-3] ]</span>


<span class="nx">engine</span><span class="p">.</span><span class="nx">rateContents</span><span class="p">(</span><span class="s1">'test_user_2'</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'an ad about magicians'</span><span class="p">,</span>
  <span class="s1">'an ad about tablet games'</span>
<span class="p">]);</span>
<span class="c1">//  [ ["an ad about tablet games",0], ["an ad about magicians",-2] ]</span>


<span class="nx">engine</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="s2">"database.json"</span><span class="p">);</span>
</pre></div>

<h2>
<a name="algorithm" class="anchor" href="#algorithm"><span class="octicon octicon-link"></span></a>Algorithm</h2>

<ol>
<li><p>The user evaluates an object (eg. a tweet, a song, an ad..) by giving a score.
This score is typically +1 for a positive evaluation (eg. a like, a click on an ad, or when he buys a product),
but it can also be -1, for negative evaluation (eg. dislike, product removed from the cart, ad marked as irrelevant)</p></li>
<li><p>This score is sent together with a content to the recommendation engine. For the moment the content <em>must</em> be a plain english text string (this can be a wikipedia page, an ontology, a list of keywords.. anything relevant, with some meaning).</p></li>
<li><p>The engine extracts patterns of concepts (n-grams), and will reinforce (or weaken) connections between these concepts, depending on the evaluation given by the user.</p></li>
<li><p>The engine also try to detect weak relationships between concepts, by injecting synonyms from a thesaurus of the English language. It is nice because it can create hidden links between objects very quickly (eg. "dog picture" will be weakly connected to "wolf video", even if we never display a "dog video" or a "wolf picture" to the user)</p></li>
</ol><h2>
<a name="characteristics" class="anchor" href="#characteristics"><span class="octicon octicon-link"></span></a>Characteristics</h2>

<h3>
<a name="data-efficient" class="anchor" href="#data-efficient"><span class="octicon octicon-link"></span></a>Data-efficient</h3>

<p>Even if data is scarce, the use of weak relationship (for the moment only synonyms) improve results even when there is not a lot of data to be trained on (eg. less than 10). there will be errors, but it should still perform better than with no data at all.</p>

<h3>
<a name="self-regulating" class="anchor" href="#self-regulating"><span class="octicon octicon-link"></span></a>Self-regulating</h3>

<p>The network can change over time. New connections can be created, old ones can be reinforced or deleted. A user can choose to hate something he used to love months ago.</p>

<h3>
<a name="flexible" class="anchor" href="#flexible"><span class="octicon octicon-link"></span></a>Flexible</h3>

<p>You can put anything in the content string, eg meta-keyword to describe not only the content but also the context or environment. </p>

<p>You are not limited to -1 or +1, you can use any value. For instance if the user likes a product, that could be a +1, and if he buys it, a +5. This is up to you, you should do AB testing or other research to tweak this.
Just remember that a signal value of 0 will have no effect, because it represents the non-action (eg. the user just ignore the ad, or skip a product evaluation). If you want to force a link to be weakened (eg. automatically, after a few days or weeks) you have to use a negative value.</p>

<h2>
<a name="known-issues" class="anchor" href="#known-issues"><span class="octicon octicon-link"></span></a>Known issues</h2>

<ul>
<li><p>It would work better with a filter for the most common (and thus irrelevant) keywords. Than can be implemented using some kind of TF-IDF-like algorithm, but I've just not done it yet. This is the next thing on the TODO.</p></li>
<li><p>Injecting additional, weak connections is powerful, but using a thesaurus is still a bit limited. It would work even better with network data from DBpedia's ontology, or other semantic graph databases.</p></li>
<li><p>The memory usage can be a problem, because a lot of data is stored per-user. You will eventually need to purge the network from time to time, in order to remove the weakest/old links. That could be automatic, but it depends on how much memory you can use, so it won't be easy to implement this kind of GC.</p></li>
<li><p>The profile networks are not easily human-readable. They are made by and for the machine. But you could try to export them to visualize the graph in Gephi for instance.</p></li>
</ul><h2>
<a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h2>

<h3>
<a name="new-fussyengine" class="anchor" href="#new-fussyengine"><span class="octicon octicon-link"></span></a>new fussy.Engine()</h3>

<p>Instanciate a new engine with default settings</p>

<h3>
<a name="new-fussyenginefile_path" class="anchor" href="#new-fussyenginefile_path"><span class="octicon octicon-link"></span></a>new fussy.Engine(file_path)</h3>

<p>Instanciate a new engine by loading a data dump file (basically a collection of profiles + the config)</p>

<h3>
<a name="new-fussyengine-ngramsize-3-" class="anchor" href="#new-fussyengine-ngramsize-3-"><span class="octicon octicon-link"></span></a>new fussy.Engine({ ngramSize: 3 }}</h3>

<p>Instanciate a new engine, with a ngramSize of 3. Values &gt; 3 go deeper into the meaning of the sentence (complex word patterns are added to the network), but dramatically increase the memory andcpu usage. "a n-gram size of 3 should be enough for most people" â„¢.</p>

<h3>
<a name="fussyengineratecontentsprofile_id-array_of_content_strings" class="anchor" href="#fussyengineratecontentsprofile_id-array_of_content_strings"><span class="octicon octicon-link"></span></a>fussy.Engine#rateContents(profile_id, array_of_content_strings)</h3>

<p>Evaluate the interest of one profile for a set of contents.</p>

<h3>
<a name="fussyenginerateprofilescontent--profiles-array_of_profile_ids-limit-n_top_profiles_to_keep" class="anchor" href="#fussyenginerateprofilescontent--profiles-array_of_profile_ids-limit-n_top_profiles_to_keep"><span class="octicon octicon-link"></span></a>fussy.Engine#rateProfiles(content[, { profiles: array_of_profile_ids, limit: n_top_profiles_to_keep}])</h3>

<p>Search for profiles that could be the most interested by a givent content.</p>

<h3>
<a name="fussyengineprunemin_weight-max_weight" class="anchor" href="#fussyengineprunemin_weight-max_weight"><span class="octicon octicon-link"></span></a>fussy.Engine#prune(min_weight, max_weight)</h3>

<p>Delete non-significant links (those near 0 influence)</p>

<h3>
<a name="fussyenginesavefile_path" class="anchor" href="#fussyenginesavefile_path"><span class="octicon octicon-link"></span></a>fussy.Engine#save(file_path)</h3>

<p>Dump the databse to a JSON file</p>

<h3>
<a name="fussyclearcontentstring" class="anchor" href="#fussyclearcontentstring"><span class="octicon octicon-link"></span></a>fussy.clearContent(string)</h3>

<p>The cleaning function used internally by Fussy. It remove useless spaces and line returns. Handy to clean tweets to be printed in the console, for instance.</p>

<h2>
<a name="todo" class="anchor" href="#todo"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>Add a TF-IDF algorithm?</li>
<li>MongoDB implementation?</li>
</ul><h2>
<a name="changelog" class="anchor" href="#changelog"><span class="octicon octicon-link"></span></a>Changelog</h2>

<h4>
<a name="004" class="anchor" href="#004"><span class="octicon octicon-link"></span></a>0.0.4</h4>

<ul>
<li>Small optimization for the rateContents method</li>
</ul><h4>
<a name="003" class="anchor" href="#003"><span class="octicon octicon-link"></span></a>0.0.3</h4>

<ul>
<li>Added the rateProfiles and rateContents methods</li>
</ul><h4>
<a name="002" class="anchor" href="#002"><span class="octicon octicon-link"></span></a>0.0.2</h4>

<ul>
<li>Total rewrite. See README for more information. Yup, this file.</li>
</ul><h4>
<a name="001-wednesday-december-5-2012" class="anchor" href="#001-wednesday-december-5-2012"><span class="octicon octicon-link"></span></a>0.0.1 (Wednesday, December 5, 2012)</h4>

<ul>
<li>Added <code>database.size</code>
</li>
<li>Added <code>database.prune(threshold)</code>
</li>
<li>Added <code>database.toFile(fileName)</code>
</li>
<li>Removed the toy Twitter database from core</li>
<li>Added an example crawler you could use to build a tag database</li>
</ul><h4>
<a name="000" class="anchor" href="#000"><span class="octicon octicon-link"></span></a>0.0.0</h4>

<ul>
<li>Initial version, not very documented</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/jbilcke/node-fussy/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/jbilcke/node-fussy/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/jbilcke/node-fussy"></a> is maintained by <a href="https://github.com/jbilcke">jbilcke</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>